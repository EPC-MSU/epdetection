## Utilities - Описание папки

В этой папке лежат скрипты для обучения/тестирования нейронных сетей, подготовки и проверки базы для обучения.

#### Использование
* Распаковать сюда базу `base_v2.1` элементов для обучения
* Установить основные зависимости, запустив `requirements_to_venv.bat`
* Чтобы обучить заного модель нужно запустить `nn_train.ipynb` и два сгенерированных файла `.pth` и `.schema.json` скопировать в папку `dumps`, удалив старые файлы с этими же расширениями.


#### Что тут есть
* `model.py` - файл с классом модели, который используется и для обучения через юпитер блокнот и для выполнения модуля. Поэтому для синхронных изменений модели (в блокноте обучения и в коде epdetection) лучше оставить модель в этом файле.
* `model_info` - по сути костыль для совместимости, там есть класс, который создаёт json файл, содержащий имя сохраненной модели `.pth` и в эту схему грузит сохраненное заранее описание детектора старого метода.
* `nn_train.ipynb` - блокнот для обучения модели
  * В результате создаёт два файла
    * `.pth` - файл модели PyTorch
    * `.schema.json` - файл описания из пунтка выше

#### Что тут есть ещё
##### helpful
* `generate_incorrect.py` --  скрипт генерирует неверные изображения компонентов, нарезая платы.
  * Требования: установленный python и модуль opencv-python
  * Аргументы командной строки:
  * `-el` -- Имя папки с элементом, например SOT323
  * `-n` -- Количество изображений, которое нужно сгенерировать
  * Например, чтобы сгенерировать 200 неверных изображений SMD0603_CL, нужно ввести в консоли:
  * ```bash
    python generate_incorrect.py -el SMD0603_CL -n 200
    ```
* `dataset_checker.py` -- скрипт содержащий три функции

  * renamer -- переименовывает все файлы в указанной директории и поддиректориях указывая номер файла в названии (счёт файлов независимый в каждой папке)
  * Resolution Checker -- проверяет все ли файлы в папке имеют одинаковое разрешение
  * FOLDER PLOT -- выводит в консоль структуру файлов и папок в указанной директории и разрешение изображений в них
##### call_plot
* `pyan_plot.bat` - если этот файл вместе с архивом `pyan.tar.gz` поместить в любое место, в батнике написать интересующее название файла и запустить батник, то эта утилита построит красивый график этого питон файла с зависимостями.


